<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GanttRoll - Tu diagrama de Gantt simple</title>
    <meta name="description" content="GanttRoll - Organiza tus proyectos con un diagrama de Gantt simple y visual. Gestión de tareas con arrastrar y soltar, múltiples escalas de tiempo y diseño tipo piano roll.">
    <meta name="keywords" content="gantt, diagrama, proyectos, tareas, organización, productividad, gestión de proyectos">
    <meta name="author" content="Mike-0-code">
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body class="dark-theme">
    <!-- Barra superior -->
    <header class="top-bar">
        <h1 class="app-name">GanttRoll</h1>
        <div class="header-actions">
            
            <button class="export-btn" onclick="exportToPNG()" title="Exportar diagrama a PNG">Exportar PNG</button>
            <button class="info-btn" aria-label="Información de almacenamiento" title="Información de almacenamiento">ⓘ</button>

            <div class="theme-switch">
                <label class="switch">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider"></span>
                </label>
                <span class="theme-label">Tema</span>
            </div>
        </div>   
    </header>
    
    <div class="container">
        <div class="controls">
            <div class="scale-selector">
                <button class="scale-btn active" data-scale="days">Días</button>
                <button class="scale-btn" data-scale="weeks">Semanas</button>
                <button class="scale-btn" data-scale="months">Meses</button>
            </div>
            
            <button id="add-task-btn" class="primary-btn">+ Nueva Tarea</button>
            <button class="reset-btn" onclick="openResetModal()" title="Reiniciar diagrama completo">Reiniciar</button>
            
            <div class="date-navigation">
                <button id="prev-date-btn" class="nav-btn">←</button>
                <div class="date-display" id="current-range">15 - 28 Enero 2024</div>
                <button id="next-date-btn" class="nav-btn">→</button>
                <button id="today-btn" class="secondary-btn">Hoy</button>
            </div>
        </div>

        <div class="gantt-timeline">

            <!-- Campo de nombre del proyecto -->
            <div class="project-name-container">
                <div class="project-name-input" contenteditable="true" id="project-name-input">Mi Proyecto</div>
                <div class="char-counter project-char-counter">0/50</div>
            </div>
            
            <div class="timeline-header">
                <div class="timeline-title">Tareas</div>
                <div class="timeline-range" id="timeline-title">Enero 2024</div>
            </div>

            <div class="time-scale-container">
                <div class="time-scale-spacer"></div>
                <div class="time-scale" id="time-scale"></div>
            </div>
            
            <div class="tasks-container" id="tasks-container"></div>
        </div>
    </div>

    <!-- Modal de Reinicio -->
    <div id="reset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reiniciar Proyecto</h3>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de que quieres reiniciar el proyecto? Se perderán todas las tareas y configuraciones actuales. Esta acción no se puede deshacer.</p>
            </div>
            <div class="modal-actions">
                <button id="cancel-reset-btn" class="btn btn-secondary">Cancelar</button>
                <button id="confirm-reset-btn" class="btn btn-danger">Reiniciar Todo</button>
            </div>
        </div>
    </div>
    
    <!-- Modal de confirmación para eliminar tarea -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <h2>¿Eliminar tarea?</h2>
            <p id="delete-task-name">¿Estás seguro de que quieres eliminar esta tarea? Esta acción no se puede deshacer.</p>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancel-delete-btn">Cancelar</button>
                <button class="modal-btn delete" id="confirm-delete-btn">Eliminar</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
